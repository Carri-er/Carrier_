<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<div th:replace="~{head/head::head}"></div>
<body>
	<div th:replace="~{nav/nav::nav}"></div>
	<div th:replace="~{alert/toast::div}"></div>
	<div id="info" class="container-fluid mt-4 mb-3">
		<div class="container px-4 px-sm-5 pt-4">
			<div class="row">
				<div class="col-12">
					<h3 class="text-bold">
						# <span th:text="${showTag}"></span>
						<th:block th:if="${area.size == 1}">
							<span th:text="${showArea}"></span>
						</th:block>

						<th:block th:unless="${area.size == 1}">ì „ì²´</th:block>
					</h3>
				</div>
			</div>
			<!--board-->
			<div class="row">
				<div class="col order-2">
					<hr>
					<div class="row">
						<div class="col">
							ì´ <span class="blue-text text-bold" th:text="${getCount}"></span>ê±´
						</div>
						<div class="col-12 col-md-7 text-end mt-2 mt-md-0">
							<span class="active">ìµœì‹ ìˆœ</span> <span>ê±°ë¦¬ìˆœ</span> <span>ì¸ê¸°ìˆœ</span>
						</div>
					</div>
					<hr>
					<div class="board row">
						<!--board-->
						<div class="row " th:each="list:${list}">
							<a th:href="@{'Event_view?id='+ ${list.getEvent_num()}}"
								class="row">
								<div class="col-3 board-left text-center">
									<img th:src="@{'../img/info/' + ${list.getEvent_thumbnail()}}"
										class="img-fluid rounded-4" alt=""
										style="width: 80px; height: 80px;">
								</div>
								<div class="col">
									<div class="row">
										<div class="col">
											<h5>
												[<span th:text="${list.getEvent_category()}"></span>] <span
													th:text="${list.getEvent_name()}"></span>
											</h5>
										</div>
									</div>
									<div class="row">
										<div class="col">
										
											<button type="button"
												class="btn rounded-pill px-3 btn-light f14"
												th:text="${list.getEvent_area()}"
												th:if="${list.getEvent_area() != null}"></button>
											<button type="button"
												class="btn rounded-pill px-3 btn-light f14"
												th:text="${list.getEvent_area2()}"
												th:if="${list.getEvent_area2() != null}"></button>
											<button type="button"
												class="btn rounded-pill px-3 btn-light f14"
												th:text="${list.getEvent_tag()}"
												th:if="${list.getEvent_tag() != null}">#</button>
										</div>
									</div>
								</div>

								<hr class="mt-3 ms-3">
							</a>
						</div>
						<!--------->

					</div>
					<!-- í˜ì´ì§• -->
					<div class="pagination"
						th:if="${showArea == null && showTag == null}">
						<ul class="d-flex">
							<!-- ì´ì „ ë²„íŠ¼ -->
							<li th:if="${currentPage > 1}" class="mx-2"><a
								th:href="@{'/info?page=' + ${mPage} + '&amp;area=' + ${showArea} + '&amp;tagss=' + ${showTag}}">&laquo;
									ì´ì „</a></li>

							<!-- í˜ì´ì§€ ë²ˆí˜¸ -->
							<li
								th:each="pageNum : ${#numbers.sequence((currentPage - 4 > 0 ? currentPage - 4 : 1), 
                        (currentPage + 4 < totalPages ? currentPage + 4 : totalPages))}"
								class="mx-2"><a
								th:href="@{'/info?page=' + ${pageNum} + '&amp;area=' + ${showArea} + '&amp;tagss=' + ${showTag}}"
								th:text="${pageNum}"
								th:class="${currentPage == pageNum} ? 'current-page' : ''"></a>
							</li>

							<!-- ë‹¤ìŒ ë²„íŠ¼ -->
							<li th:if="${currentPage < totalPages}" class="mx-2"><a
								th:href="@{'/info?page=' + ${pPage} + '&amp;area=' + ${showArea} + '&amp;tagss=' + ${showTag}}">ë‹¤ìŒ
									&raquo;</a></li>
						</ul>
					</div>
					<div class="pagination" th:if="${showArea != null}">
						<ul class="d-flex">
							<!-- ì´ì „ ë²„íŠ¼ -->
							<li th:if="${currentPage > 1}" class="mx-2"><a
								th:href="@{'/Event_area?page=' + ${mPage} + '&amp;area=' + ${showArea} + '&amp;tagss=' + ${showTag}}">&laquo;
									ì´ì „</a></li>

							<!-- í˜ì´ì§€ ë²ˆí˜¸ -->
							<li
								th:each="pageNum : ${#numbers.sequence((currentPage - 4 > 0 ? currentPage - 4 : 1), 
                        (currentPage + 4 < totalPages ? currentPage + 4 : totalPages))}"
								class="mx-2"><a
								th:href="@{'/Event_area?page=' + ${pageNum} + '&amp;area=' + ${showArea} + '&amp;tagss=' + ${showTag}}"
								th:text="${pageNum}"
								th:class="${currentPage == pageNum} ? 'current-page' : ''"></a>
							</li>

							<!-- ë‹¤ìŒ ë²„íŠ¼ -->
							<li th:if="${currentPage < totalPages}" class="mx-2"><a
								th:href="@{'/Event_area?page=' + ${pPage} + '&amp;area=' + ${showArea} + '&amp;tagss=' + ${showTag}}">ë‹¤ìŒ
									&raquo;</a></li>
						</ul>
					</div>
					<div class="pagination" th:if="${showTag != null}">
						<ul class="d-flex">
							<!-- ì´ì „ ë²„íŠ¼ -->
							<li th:if="${currentPage > 1}" class="mx-2"><a
								th:href="@{'/Event_tags?page=' + ${mPage} + '&amp;area=' + ${showArea} + '&amp;tagss=' + ${showTag}}">&laquo;
									ì´ì „</a></li>

							<!-- í˜ì´ì§€ ë²ˆí˜¸ -->
							<li
								th:each="pageNum : ${#numbers.sequence((currentPage - 4 > 0 ? currentPage - 4 : 1), 
                        (currentPage + 4 < totalPages ? currentPage + 4 : totalPages))}"
								class="mx-2"><a
								th:href="@{'/Event_tags?page=' + ${pageNum} + '&amp;area=' + ${showArea} + '&amp;tagss=' + ${showTag}}"
								th:text="${pageNum}"
								th:class="${currentPage == pageNum} ? 'current-page' : ''"></a>
							</li>

							<!-- ë‹¤ìŒ ë²„íŠ¼ -->
							<li th:if="${currentPage < totalPages}" class="mx-2"><a
								th:href="@{'/Event_tags?page=' + ${pPage} + '&amp;area=' + ${showArea} + '&amp;tagss=' + ${showTag}}">ë‹¤ìŒ
									&raquo;</a></li>
						</ul>
					</div>
				</div>
				<!------------ìš°ì¸¡ (í•„í„°)------------->
				<div
					class="col-12 col-lg-5 order-1 order-lg-2 bg-light mt-3 p-2 ms-md-2 order-1 rounded-4">
					<!-- ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ -->
					<!-- <a href="#" class="btn-refresh ms-auto mt-2 me-2"></a> -->
					<div class="row">
						<div class="col">
							<hr>
						</div>
						<div class="col-12">
							<a href="info" class="btn rounded-pill px-3 btn-secondary f14">#
								ì „ì²´</a> <a th:href="@{'Event_area?area='+${area}}"
								class="btn rounded-pill px-3 btn-light f14"
								th:each="area:${area}"># <span th:text="${area}"></span>
							</a>

						</div>
						<div class="col-12 ">
							<hr>
						</div>
						<div class="col-12">
							<a href="info" class="btn rounded-pill px-3 btn-secondary f14">#
								ì „ì²´ íƒœê·¸</a>
							<button type="button" class="btn rounded-pill px-3 btn-light f14"
								th:each="tag : ${tags}">
								<a th:href="@{'Event_tags?tagss='+${tag}}"
									th:if="${tag != null}"># <span th:text="${tag}"></span></a>
							</button>
						</div>
					</div>
				</div>
			</div>
			<th:block th:if="${session.Member_Id=='admin'}">
				<div class="col-12 text-end mt-3">
					<a th:href="@{'Event_write_content'}" class="btn btn-main"> ê¸€ì“°ê¸°</a>
				</div>
			</th:block>
		</div>

	</div>

	<div th:replace="~{footer/footer::footer}"></div>
	<script type="text/javascript">
        $(document).ready(function() {
            // URLì—ì„œ msg ë§¤ê°œë³€ìˆ˜ ê°€ì ¸ì˜¤ê¸°
            const urlParams = new URLSearchParams(window.location.search);
            const msg = urlParams.get('msg');
            const name = urlParams.get('name');
            
         // ë©”ì‹œì§€ê°€ ì¡´ì¬í•  ê²½ìš° toastë¡œ í‘œì‹œ
            if (msg !== null && msg !== "") {
                let message;
                if(msg == 1){
                    message = "ê¸€ì‘ì„±ì„ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤. ğŸ–";
                }
                
                // ë¶€íŠ¸ìŠ¤íŠ¸ë© toast íŠ¸ë¦¬ê±°
                $('.my-toast-body').text(message);
                $('.my-toast').toast('show');
            }
        });
    </script>
</body>
</html>